<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mule Mart - Home</title>
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='images/favicon.svg') }}">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.tailwindcss.com"></script>


</head>

<body>

    {% include "_navbar.html" %}



    <main>
        <section class="hero">
            <div class="hero-image">
                <div class="hero-overlay">
                    <img src="{{ url_for('static', filename='images/Miller_Library_Hero_Section_2.webp') }}"
                        alt="background image" class="hero-bg" style="width:100%">
                    <div class="hero-text">
                        <h1 class="text-4xl font-bold text-white text-center mb-4">Hi {{ user.first_name }} !</h1>
                        <h2 class="text-2xl font-bold text-white text-center mb-4">Welcome to Mule Mart</h2>
                        <p class="mb-6 text-white text-center text-1xl border rounded-3"> A dedicated platform to buy,
                            sell
                            and donate items within the Colby community
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section class="categories text-center py-12 bg-gray-50" style="padding-top: 60px">
            <h2 class="text-3xl font-bold mb-10">Categories</h2>
            <p class="mb-6 text-gray-600">Shop goods by category</p>
            <a href="{{ url_for('main.buy_item') }}" class="btn btn-dark mb-10 border-0 rounded-3">Shop All</a>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                {% for item in category_items %}
                <div class="category-item bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition cursor-pointer"
                    onclick="window.location.href='{{ url_for('main.buy_item', category=item.category) }}'">
                    <img src="{{ item.item_image_url }}"
                        onerror="this.onerror=null; this.src='{{ url_for('static', filename='images/default_item.webp') }}'"
                        alt="{{ item.title }}" class="mx-auto w-40 h-40 object-contain mb-4">
                    <h3 class="text-lg font-semibold">{{ item.title }}</h3>
                    <p class="text-sm font-bold">${{ "%.2f"|format(item.price) }}</p>
                    {% if item.category %}
                    <p class="text-gray-500 text-sm">{{ item.category }}</p>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </section>


        <!-- Featured Items -->
        <section id="search-results" class="featured text-center py-12">
            <h2 class="text-3xl font-bold mb-10">Recently posted items</h2>
            <p class="mb-6 text-gray-600">View the latest priced and free items</p>

            {% if recent_items %}
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                {% for item in recent_items %}
                <div class="item-card bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition cursor-pointer"
                    onclick="window.location.href='{{ url_for('main.item_details', item_id=item.id) }}'">
                    <img src="{{ item.item_image_url }}"
                        onerror="this.onerror=null; this.src='{{ url_for('static', filename='images/default_item.webp') }}'"
                        alt="{{ item.title }}" class="mx-auto w-40 h-40 object-contain mb-4">
                    <h3 class="text-lg font-semibold">{{ item.title }}</h3>
                    <p class="text-sm font-bold">${{ "%.2f"|format(item.price) }}</p>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="mt-5">
                <i class="bi bi-inbox text-gray-400" style="font-size: 3rem;"></i>
                <p class="text-gray-600 mt-3">No items posted yet.</p>
            </div>
            {% endif %}
        </section>
    </main>



    {% include '_footer.html' %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <script src="{{ url_for('static', filename='js/home.js') }}"></script>

</body>

</html>